USE `forest`;
CREATE TABLE IF NOT EXISTS `forest`.`category` (`id` INT NOT NULL AUTO_INCREMENT ,`name` VARCHAR(45) NOT NULL ,`tags` VARCHAR(45) NULL ,PRIMARY KEY (`id`) );
CREATE TABLE IF NOT EXISTS `forest`.`person` (`id` INT NOT NULL AUTO_INCREMENT ,`firstname` VARCHAR(50) NOT NULL ,`lastname` VARCHAR(100) NOT NULL ,`email` VARCHAR(45) NOT NULL ,`address` VARCHAR(45) NOT NULL ,`city` VARCHAR(45) NOT NULL ,`password` VARCHAR(100) NULL ,`dtype` VARCHAR(31) NULL DEFAULT NULL ,PRIMARY KEY (`id`) ,UNIQUE INDEX `SQL_PERSON_EMAIL_INDEX` (`email` ASC) );
CREATE TABLE IF NOT EXISTS `forest`.`groups` (`id` INT NOT NULL AUTO_INCREMENT ,`name` VARCHAR(50) NOT NULL ,`description` VARCHAR(300) NULL ,PRIMARY KEY (`id`) );
CREATE TABLE IF NOT EXISTS `forest`.`person_groups` (`groups_id` INT NOT NULL ,`email` VARCHAR(45) NOT NULL ,INDEX `sql_persongroups_email_index` (`email` ASC) ,INDEX `sql_persongroups_id_index` (`groups_id` ASC) ,CONSTRAINT `fx_person_groups_person`FOREIGN KEY (`email` )REFERENCES `forest`.`person` (`email` ),CONSTRAINT `fx_person_groups_groups`FOREIGN KEY (`groups_id` )REFERENCES `forest`.`groups` (`id` ));
CREATE TABLE IF NOT EXISTS `forest`.`order_status` (`id` INT NOT NULL AUTO_INCREMENT ,`status` VARCHAR(45) NOT NULL ,`description` VARCHAR(200) NULL ,PRIMARY KEY (`id`) );
CREATE TABLE IF NOT EXISTS `forest`.`customer_order` (`id` INT NOT NULL AUTO_INCREMENT ,`amount` FLOAT(52) NOT NULL ,`date_created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,`customer_id` INT NOT NULL ,`status_id` INT NOT NULL ,PRIMARY KEY (`id`) ,INDEX `SQL_ORDER_STATUS_ID_INDEX` (`status_id` ASC) ,INDEX `SQL_ORDER_CUSTOMER_ID_INDEX` (`customer_id` ASC) ,CONSTRAINT `FK_CUSTOMER_ORDER_ORDER_STATUS1`FOREIGN KEY (`status_id` )REFERENCES `forest`.`order_status` (`id` ),CONSTRAINT `FK_CUSTOMER_ORDER_CUSTOMER1`FOREIGN KEY (`customer_id` )REFERENCES `forest`.`person` (`id` ));
CREATE TABLE IF NOT EXISTS `forest`.`product` (`id` INT NOT NULL AUTO_INCREMENT ,`name` VARCHAR(45) NOT NULL ,`price` DECIMAL(10,2) NOT NULL ,`description` VARCHAR(145) NOT NULL ,`img` VARCHAR(45) NULL ,`category_id` INT NOT NULL ,`img_src` BLOB(1073741823) NULL ,PRIMARY KEY (`id`) ,INDEX `SQL_PRODUCT_CATEGORY_INDEX` (`category_id` ASC) ,CONSTRAINT `FK_PRODUCT_CATEGORY`FOREIGN KEY (`category_id` )REFERENCES `forest`.`category` (`id` ));
CREATE TABLE IF NOT EXISTS `forest`.`order_detail` (`order_id` INT NOT NULL AUTO_INCREMENT ,`product_id` INT NOT NULL ,`qty` INT NOT NULL ,PRIMARY KEY (`order_id`, `product_id`) ,INDEX `SQL_ORDER_PRODUCT_ID_INDEX` (`product_id` ASC) ,INDEX `SQL_ORDER_DETAIL_ID_INDEX` (`order_id` ASC) ,CONSTRAINT `FK_ORDER_DETAIL_PRODUCT`FOREIGN KEY (`product_id` )REFERENCES `forest`.`product` (`id` ),CONSTRAINT `FK_ORDER_DETAIL_ORDER`FOREIGN KEY (`order_id` )REFERENCES `forest`.`customer_order` (`id` ));
USE `forest`;